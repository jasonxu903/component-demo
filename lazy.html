<!doctype html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.js"></script>

    <title>Document</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }
        ul,
        ol {
            list-style: none;
            font-size: 0;
        }
        img {
            width: 480px;
            height: 360px;
        }
        .clearfix {
            display: block;
            content: '';
            clear: both;
        }
        .container {
            width: 980px;
            margin: 0 auto;
            padding: 5px;
        }
        .container > li {
            float: left;
            margin: 5px;
        }
    </style>
</head>

<body>
<ul class="container clearfix">
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg"/>
        </a>
    </li>
    <li>
        <a href="#">
            <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                 data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg"/>
        </a>
    </li>

</ul>

<script>
    var LazyLoad = (function () {
        function _LazyLoad($ct) {
            this.$ct = $ct
            this.lazyImg()
            this.bind()
        }
        _LazyLoad.prototype = {
            bind: function () {
                var that = this
                var loadClock
                $(window).on('scroll', function () {
                    if (loadClock) {
                        clearTimeout(loadClock)
                    }
                    loadClock = setTimeout(function () {
                        that.lazyImg()
                        console.log('scroll')
                    }, 100)
                })
            },
            lazyImg: function () {
                var that = this
                this.$ct.find('img').each(function () {
                    if (that.checkVisible($(this)) && !that.isLoaded($(this))) {
                        that.loadImg($(this))
                    }
                })
            },
            checkVisible: function ($node) {
                var offsetTop = $node.offset().top
                var scrollTop = $(window).scrollTop()
                var windowHeight = $(window).height()
                return offsetTop > scrollTop && offsetTop < scrollTop + windowHeight
            },
            isLoaded: function ($node) {
                return $node.attr('src') === $node.attr('data-src')
            },
            loadImg: function ($node) {
                $node.attr('src', $node.attr('data-src'))
            }
        }

        return {
            init: function ($nodes) {
                $nodes.each(function (index, $node) {
                    new _LazyLoad($($node))
                })
            }
        }
    })()

    LazyLoad.init($('.container'))
</script>
</body>

</html>